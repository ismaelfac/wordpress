(function($){"use strict";if(typeof locationData!=="undefined"){var allLocations=locationData.all_locations;var locationsCount=allLocations.length;var selectIds=locationData.select_names;var selectCount=parseInt(locationData.select_count);var locationsInParams=locationData.locations_in_params;var any_text=locationData.any_text;var any_value=locationData.any_value;var addChildLocations=function(parentID,targetSelect,prefix,all_child){var childLocations=[];var childLocationsCounter=0;if(targetSelect.has('option').length==0){targetSelect.append('<option value="'+any_value+'" selected="selected">'+any_text+'</option>');targetSelect.val(any_value).trigger("change");}for(var i=0;i<locationsCount;i++){var currentLocation=allLocations[i];if(parseInt(currentLocation['parent'])==parentID){targetSelect.append('<option value="'+currentLocation['slug']+'">'+prefix+currentLocation['name']+'</option>');childLocations[childLocationsCounter]=currentLocation;childLocationsCounter++;if(all_child){var currentLocationID=parseInt(currentLocation['term_id']);addChildLocations(currentLocationID,targetSelect,prefix+'- ',all_child);}}}return childLocations;};var getRelatedTermID=function(selectedLocation){var termID=0;var currentLocation;for(var i=0;i<locationsCount;i++){currentLocation=allLocations[i];if(currentLocation['slug']==selectedLocation){termID=parseInt(currentLocation['term_id']);break;}}return termID;};var resetSelect=function(targetSelect){targetSelect.empty();targetSelect.append('<option value="'+any_value+'" selected="selected">'+any_text+'</option>');targetSelect.val(any_value).trigger("change");};var disableSelect=function(targetSelect){resetSelect(targetSelect);targetSelect.closest('.option-bar').addClass('disabled');if(targetSelect.is(':enabled')){targetSelect.prop("disabled",true);}var targetSelectID=targetSelect.attr('id');var targetSelectIndex=selectIds.indexOf(targetSelectID);var nextSelectBoxesCount=selectCount-(targetSelectIndex+1);if(nextSelectBoxesCount>0){for(var i=targetSelectIndex+1;i<selectCount;i++){var tempSelect=$('#'+selectIds[i]);resetSelect(tempSelect);tempSelect.closest('.option-bar').addClass('disabled');if(tempSelect.is(':enabled')){tempSelect.prop("disabled",true);}}}};var enableSelect=function(targetSelect){if(targetSelect.is(':disabled')){targetSelect.prop('disabled',false);}var optionWrapper=targetSelect.closest('.option-bar');if(optionWrapper.hasClass('disabled')){optionWrapper.removeClass('disabled');}};var updateChildSelect=function(event){var selectedLocation=$(this).val();var currentSelectIndex=selectIds.indexOf($(this).attr('id'));if(selectedLocation==any_value&&currentSelectIndex>-1&&currentSelectIndex<(selectCount-1)){for(var s=currentSelectIndex;s<(selectCount-1);s++){var childSelectIsLast=(selectCount==(s+2));var childSelect=$('#'+selectIds[s+1]);childSelect.empty();var anyChildLocations=[];$('#'+selectIds[s]+' > option').each(function(){var currentOptionVal=this.value;if(currentOptionVal!=any_value){var relatedTermID=getRelatedTermID(currentOptionVal);if(relatedTermID>0){var tempLocations=addChildLocations(relatedTermID,childSelect,'',childSelectIsLast);if(tempLocations.length>0){anyChildLocations=$.merge(anyChildLocations,tempLocations);}}}});if(anyChildLocations.length>0){enableSelect(childSelect);if(!childSelectIsLast){childSelect.change(updateChildSelect);}}else{disableSelect(childSelect);break;}}}else{var parentID=getRelatedTermID(selectedLocation);if(parentID>0){var childLocations=[];for(var n=currentSelectIndex+1;n<selectCount;n++){var childSelect=$('#'+selectIds[n]);var childSelectIsLast=(selectCount==(n+1));childSelect.empty();if(childLocations.length==0){childLocations=addChildLocations(parentID,childSelect,'',childSelectIsLast);}else if(childLocations.length>0){var currentLocations=[];for(var i=0;i<childLocations.length;i++){var tempLocations=addChildLocations(parseInt(childLocations[i]['term_id']),childSelect,'',childSelectIsLast);if(tempLocations.length>0){currentLocations=$.merge(currentLocations,tempLocations);}}childLocations=currentLocations;}if(childLocations.length>0){enableSelect(childSelect);if(!childSelectIsLast){childSelect.change(updateChildSelect);}}else{disableSelect(childSelect);break;}}}}};var selectRightOption=function(targetSelect){if(Object.keys(locationsInParams).length>0){var selectName=targetSelect.attr('name');if(typeof locationsInParams[selectName]!='undefined'){targetSelect.find('option[value="'+locationsInParams[selectName]+'"]').prop('selected',true);}}}
var initLocations=function(){var parentLocations=[];for(var s=0;s<selectCount;s++){var currentSelect=$('#'+selectIds[s]);var currentIsLast=(selectCount==(s+1));if(s==0){parentLocations=addChildLocations(0,currentSelect,'',currentIsLast);}else{if(parentLocations.length>0){var currentLocations=[];var previousSelect=$('#'+selectIds[s-1]);if(previousSelect.val()==any_value){for(var i=0;i<parentLocations.length;i++){var tempLocations=addChildLocations(parseInt(parentLocations[i]['term_id']),currentSelect,'',currentIsLast);if(tempLocations.length>0){currentLocations=$.merge(currentLocations,tempLocations);}}}else{var parentID=getRelatedTermID(previousSelect.val());if(parentID>0){currentLocations=addChildLocations(parentID,currentSelect,'',currentIsLast);}}previousSelect.change(updateChildSelect);parentLocations=currentLocations;}}if(parentLocations.length==0){disableSelect(currentSelect);break;}else{selectRightOption(currentSelect);}}}
initLocations();}if(typeof localizedSearchParams.rent_slug!=="undefined"){var property_status_changed=function(new_status){var price_for_others=$('.advance-search-form .price-for-others');var price_for_rent=$('.advance-search-form .price-for-rent');if(price_for_others.length>0&&price_for_rent.length>0){if(new_status==localizedSearchParams.rent_slug){price_for_others.addClass('hide-fields').find('select').prop('disabled',true);price_for_rent.removeClass('hide-fields').find('select').prop('disabled',false);}else{price_for_rent.addClass('hide-fields').find('select').prop('disabled',true);price_for_others.removeClass('hide-fields').find('select').prop('disabled',false);}}}
$('.advance-search-form #select-status').change(function(e){var selected_status=$(this).val();property_status_changed(selected_status);});var selected_status=$('.advance-search-form #select-status').val();if(selected_status==localizedSearchParams.rent_slug){property_status_changed(selected_status);}}$('#select-min-price,#select-max-price').change(function(obj,e){var min_text_val=$('#select-min-price').val();var min_int_val=(isNaN(min_text_val))?0:parseInt(min_text_val);var max_text_val=$('#select-max-price').val();var max_int_val=(isNaN(max_text_val))?0:parseInt(max_text_val);if((min_int_val>=max_int_val)&&(min_int_val!=0)&&(max_int_val!=0)){$('#select-min-price,#select-max-price').siblings('.select2-container').css('outline','1px solid red');}else{$('#select-min-price,#select-max-price').siblings('.select2-container').css('outline','none');}});$('#select-min-price-for-rent, #select-max-price-for-rent').change(function(obj,e){var min_text_val=$('#select-min-price-for-rent').val();var min_int_val=(isNaN(min_text_val))?0:parseInt(min_text_val);var max_text_val=$('#select-max-price-for-rent').val();var max_int_val=(isNaN(max_text_val))?0:parseInt(max_text_val);if((min_int_val>=max_int_val)&&(min_int_val!=0)&&(max_int_val!=0)){$('#select-min-price-for-rent, #select-max-price-for-rent').siblings('.select2-container').css('outline','1px solid red');}else{$('#select-min-price-for-rent, #select-max-price-for-rent').siblings('.select2-container').css('outline','none');}});$('#min-area,#max-area').change(function(obj,e){var min_text_val=$('#min-area').val();var min_int_val=(isNaN(min_text_val))?0:parseInt(min_text_val);var max_text_val=$('#max-area').val();var max_int_val=(isNaN(max_text_val))?0:parseInt(max_text_val);if((min_int_val>=max_int_val)&&(min_int_val!=0)&&(max_int_val!=0)){$('#min-area,#max-area').css('outline','1px solid red');}else{$('#min-area,#max-area').css('outline','none');}});$('.advance-search-form').submit(function(event){var searchFormElements=$(this).find(':input');$.each(searchFormElements,function(index,element){if(element.value==''||element.value=='any'){if(!element.disabled){element.disabled=true;}}});});var removeBorder=function(){var screenWidth=$(window).width();var isRtl=$('body').hasClass('rtl');if((979<screenWidth&&1200>screenWidth)||(767>=screenWidth&&500<=screenWidth)){if(!isRtl){var addToCompareSpan=$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').length;if(addToCompareSpan){$('.page-template-template-search .property-item .compare-meta span').css({'border':'none'});$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').css({'margin-right':'-20px','border-left':'none'});}}else{var addToCompareSpan=$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').length;if(addToCompareSpan){$('.page-template-template-search .property-item .compare-meta span').css({'border-left':'none'});$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').css({'margin-left':'-20px','border-right':'none','float':'left'});}}}else if(500<=screenWidth){if(!isRtl){var addToCompareSpan=$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').length;if(addToCompareSpan){$('.page-template-template-search .property-item .compare-meta span:nth-last-child(2)').css({'border':'none'});$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').css({'margin-right':'-20px','border-left':'1px solid #dedede'});}}else{var addToCompareSpan=$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').length;if(addToCompareSpan){$('.page-template-template-search .property-item .compare-meta span:nth-last-child(2)').css({'border':'none'});$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').css({'margin-left':'-20px','border-right':'1px solid #dedede','float':'left'});}}}else{if(!isRtl){var addToCompareSpan=$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').length;if(addToCompareSpan){$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').css({'margin-right':'0','border-left':'none'});}}else{var addToCompareSpan=$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').length;if(addToCompareSpan){$('.page-template-template-search .property-item .compare-meta span.add-to-compare-span').css({'margin-right':'0','border-left':'none','float':'right'});}}}}
removeBorder();$(window).resize(function(){removeBorder();});})(jQuery);